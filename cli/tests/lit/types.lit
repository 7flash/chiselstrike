# SPDX-FileCopyrightText: Â© 2021 ChiselStrike <info@chiselstrike.com>

# RUN: sh -e @file

cd "$TEMPDIR"

cat << EOF > "$TEMPDIR/types/types.graphql"
type Foo { a: String }
type Bar { a: String }
EOF
$CHISEL apply

# CHECK: Type defined: Foo
# CHECK: Type defined: Bar

$CHISEL restart
$CHISEL type export

# CHECK: class Bar {
# CHECK:   [[^ *a: String]]
# CHECK: }
# CHECK: class Foo {
# CHECK:   [[^ *a: String]]
# CHECK: }

cat << EOF > "$TEMPDIR/types/types.graphql"
type Zed { a: String, a: String }
EOF
set +e
$CHISEL apply 2>&1
set -e

# CHECK: UNIQUE constraint failed: field_names.field_name
